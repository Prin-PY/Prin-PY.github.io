<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 半个出家人</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/img/circle_image.png" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <link rel="alternate" href="/atom.xml" title="半个出家人" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="img/header_img/home-bg-1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">半个出家人</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['The world isn&#39;t split into good people and Death Eaters. We&#39;ve all got both light and dark inside us. What matters is the part we choose to act on. That&#39;s who we really are.', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 100,
        loop: true,
        backSpeed: 80,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  <ul class="ads">
    
        <li>
            <a href="https://curl.qcloud.com/kvO7hb43" target="_blank" rel="noopener">
                <img src="https://pic.imgdb.cn/item/62174b452ab3f51d912a5ccc.jpg" width="300" alt="云服务器限时秒杀">
            </a>
        </li>
    
        <li>
            <a href="https://www.vultr.com/?ref=8630075" target="_blank" rel="noopener">
                <img src="https://pic.imgdb.cn/item/62174b452ab3f51d912a5cd7.png" width="300" alt="vultr优惠vps">
            </a>
        </li>
    
</ul>
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-Unreal-Actor-Lifecycle"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unreal-Actor-Lifecycle/"
    >Actor Lifecycle</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unreal-Actor-Lifecycle/" class="article-date">
  <time datetime="2023-07-20T15:00:29.261Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unreal/">Unreal</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
   
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unreal/" rel="tag">Unreal</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unreal-9999-Unreal学习与拓展规划"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unreal-9999-Unreal%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%8B%93%E5%B1%95%E8%A7%84%E5%88%92/"
    >9999 Unreal学习与拓展规划</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unreal-9999-Unreal%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%8B%93%E5%B1%95%E8%A7%84%E5%88%92/" class="article-date">
  <time datetime="2023-07-20T15:00:29.259Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unreal/">Unreal</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Unreal-CI"><a href="#Unreal-CI" class="headerlink" title="Unreal CI"></a>Unreal CI</h1><ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo.png" alt=""><br><a href="https://github.com/botman99/ue4-unreal-automation-tool" target="_blank" rel="noopener">https://github.com/botman99/ue4-unreal-automation-tool</a></li>
</ul>
<h2 id="基本自动化构建"><a href="#基本自动化构建" class="headerlink" title="基本自动化构建"></a>基本自动化构建</h2><h3 id="Source-Code-Automation"><a href="#Source-Code-Automation" class="headerlink" title="Source Code Automation"></a>Source Code Automation</h3><ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_1.png" alt=""><br><a href="&#109;&#97;&#x69;&#108;&#116;&#111;&#58;&#104;&#x74;&#116;&#x70;&#x73;&#58;&#47;&#47;&#109;&#x65;&#x64;&#x69;&#117;&#x6d;&#46;&#99;&#x6f;&#109;&#x2f;&#x40;&#108;&#x69;&#102;&#101;&#101;&#x78;&#101;&#47;&#117;&#x6e;&#x72;&#101;&#x61;&#108;&#x2d;&#101;&#x6e;&#103;&#105;&#110;&#101;&#45;&#x63;&#105;&#x2d;&#112;&#97;&#x72;&#x74;&#45;&#x69;&#45;&#x73;&#111;&#x75;&#x72;&#99;&#101;&#x2d;&#99;&#x6f;&#x64;&#x65;&#45;&#x62;&#x75;&#105;&#x6c;&#x64;&#115;&#x2d;&#x38;&#48;&#48;&#48;&#99;&#x61;&#49;&#x64;&#x61;&#55;&#50;&#x33;">&#104;&#x74;&#116;&#x70;&#x73;&#58;&#47;&#47;&#109;&#x65;&#x64;&#x69;&#117;&#x6d;&#46;&#99;&#x6f;&#109;&#x2f;&#x40;&#108;&#x69;&#102;&#101;&#101;&#x78;&#101;&#47;&#117;&#x6e;&#x72;&#101;&#x61;&#108;&#x2d;&#101;&#x6e;&#103;&#105;&#110;&#101;&#45;&#x63;&#105;&#x2d;&#112;&#97;&#x72;&#x74;&#45;&#x69;&#45;&#x73;&#111;&#x75;&#x72;&#99;&#101;&#x2d;&#99;&#x6f;&#x64;&#x65;&#45;&#x62;&#x75;&#105;&#x6c;&#x64;&#115;&#x2d;&#x38;&#48;&#48;&#48;&#99;&#x61;&#49;&#x64;&#x61;&#55;&#50;&#x33;</a></li>
</ul>
<h3 id="Client-Game-Automation"><a href="#Client-Game-Automation" class="headerlink" title="Client Game Automation"></a>Client Game Automation</h3><p>学习路径：</p>
<ul>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_2.png" alt=""><br>先把Mac打包走出来（直接打包 &amp; 脚本自动打包）</p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_3.png" alt=""><br>解答一个个困惑</p>
<ul>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_4.png" alt=""><br>Cook和Build、Compile究竟是做什么</p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_5.png" alt=""><br>AutomationTool和BuildTool之间的关系</p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_6.png" alt=""><br>Graph的用法</p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_7.png" alt=""><br>UAT的运行机制</p>
</li>
</ul>
</li>
<li><p>学习打包相关知识体系，整套工具的结构和用法</p>
<ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_8.png" alt=""><br>从runUAT脚本看到UAT源码</li>
</ul>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_9.png" alt=""><br>整理一套打包工具集</p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_10.png" alt=""><br>进阶 - 分布式打包，效率提升</p>
</li>
</ul>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><ul>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_11.png" alt=""><br><a href="https://www.youtube.com/watch?v=2zkrhspvPls" target="_blank" rel="noopener">https://www.youtube.com/watch?v=2zkrhspvPls</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_12.png" alt=""><br><a href="https://patricevignola.com/post/automation-jenkins-unreal#automatically-build-your-game" target="_blank" rel="noopener">https://patricevignola.com/post/automation-jenkins-unreal#automatically-build-your-game</a></p>
</li>
</ul>
<h4 id="Mac-iOS"><a href="#Mac-iOS" class="headerlink" title="Mac iOS"></a>Mac iOS</h4><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_13.png" alt=""><br><a href="https://imzlp.com/posts/1948/" target="_blank" rel="noopener">https://imzlp.com/posts/1948/</a></p>
<ul>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_14.png" alt=""><br>UAT参数 <a href="https://zhuanlan.zhihu.com/p/41931214" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/41931214</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_15.png" alt=""></p>
</li>
</ul>
<h3 id="Server-Client-Automation"><a href="#Server-Client-Automation" class="headerlink" title="Server + Client Automation"></a>Server + Client Automation</h3><h2 id="深入理解"><a href="#深入理解" class="headerlink" title="深入理解"></a>深入理解</h2><p>Understanding Unreal Build Tool: <a href="https://ericlemes.com/2018/11/23/understanding-unreal-build-tool/" target="_blank" rel="noopener">https://ericlemes.com/2018/11/23/understanding-unreal-build-tool/</a></p>
<h2 id="效率提升"><a href="#效率提升" class="headerlink" title="效率提升"></a>效率提升</h2><h3 id="Distributed-Build"><a href="#Distributed-Build" class="headerlink" title="Distributed Build"></a>Distributed Build</h3><p>FastBuild</p>
<ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_16.png" alt=""><br><a href="https://zhuanlan.zhihu.com/p/158400394" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/158400394</a></li>
</ul>
<h2 id="CI体系"><a href="#CI体系" class="headerlink" title="CI体系"></a>CI体系</h2><p>Jenkins, CI and Test-Driven Development:</p>
<p><a href="https://unrealcommunity.wiki/jenkins-ci-amp-test-driven-development-6912tx0c" target="_blank" rel="noopener">https://unrealcommunity.wiki/jenkins-ci-amp-test-driven-development-6912tx0c</a></p>
<h3 id="Local-Project-Scan"><a href="#Local-Project-Scan" class="headerlink" title="Local Project Scan"></a>Local Project Scan</h3><h3 id="Unit-Tests-Automation"><a href="#Unit-Tests-Automation" class="headerlink" title="Unit Tests Automation"></a>Unit Tests Automation</h3><hr>
<h1 id="Unreal游戏客户端技术"><a href="#Unreal游戏客户端技术" class="headerlink" title="Unreal游戏客户端技术"></a>Unreal游戏客户端技术</h1><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>见 《Unreal入门路线》 文档</p>
<h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_17.png" alt=""><br>Compiling C++ <a href="https://ericlemes.com/2018/11/21/compiling-c-code/" target="_blank" rel="noopener">https://ericlemes.com/2018/11/21/compiling-c-code/</a></li>
</ul>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><p>Unreal资源检测工具学习：</p>
<hr>
<h1 id="Unreal游戏服务端技术"><a href="#Unreal游戏服务端技术" class="headerlink" title="Unreal游戏服务端技术"></a>Unreal游戏服务端技术</h1><hr>
<h1 id="Unreal源码"><a href="#Unreal源码" class="headerlink" title="Unreal源码"></a>Unreal源码</h1><p><a href="https://zhuanlan.zhihu.com/p/160917246" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/160917246</a></p>
<h1 id="资料集合"><a href="#资料集合" class="headerlink" title="资料集合"></a>资料集合</h1><ul>
<li><p>Exploring in UE4: <a href="https://zhuanlan.zhihu.com/p/34256771" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/34256771</a></p>
</li>
<li><p>循迹研究室：<a href="https://imzlp.com/" target="_blank" rel="noopener">https://imzlp.com/</a></p>
</li>
<li><p>UE知识库：<a href="https://ue5wiki.com/" target="_blank" rel="noopener">https://ue5wiki.com/</a></p>
</li>
<li><p>UE博客：<a href="https://blog.csdn.net/u013412391/category_9736201.html" target="_blank" rel="noopener">https://blog.csdn.net/u013412391/category_9736201.html</a></p>
</li>
<li><p><a href="https://romeroblueprints.blogspot.com/p/table-of-contents-c.html" target="_blank" rel="noopener">https://romeroblueprints.blogspot.com/p/table-of-contents-c.html</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/49518229" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/49518229</a></p>
</li>
<li><p>UE4:<a href="https://blog.csdn.net/jxyb2012/category_8644878.html" target="_blank" rel="noopener">https://blog.csdn.net/jxyb2012/category_8644878.html</a></p>
</li>
<li><p>UEC++基础：<a href="https://www.zhihu.com/column/ue4cpp" target="_blank" rel="noopener">https://www.zhihu.com/column/ue4cpp</a></p>
</li>
<li><p>Inside UE5: <a href="https://zhuanlan.zhihu.com/p/24319968" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/24319968</a></p>
</li>
</ul>
<p>GC相关原理与经验：</p>
<p><a href="https://zhuanlan.zhihu.com/p/219588301" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/219588301</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/341137213" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/341137213</a></p>
<p><a href="https://www.cxymm.net/article/qq_29523119/119860186" target="_blank" rel="noopener">https://www.cxymm.net/article/qq_29523119/119860186</a></p>
<p><a href="https://blog.csdn.net/qq826364410/article/details/97691497" target="_blank" rel="noopener">https://blog.csdn.net/qq826364410/article/details/97691497</a></p>
<p><a href="https://www.wyfnote.com/2021/11/06/UE4/UE4CPP/Unreal%20GC%E8%BF%87%E7%A8%8B" target="_blank" rel="noopener">https://www.wyfnote.com/2021/11/06/UE4/UE4CPP/Unreal%20GC%E8%BF%87%E7%A8%8B/</a></p>
<h1 id="个人问题"><a href="#个人问题" class="headerlink" title="个人问题"></a>个人问题</h1><ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_18.png" alt=""><br>Unreal加载，Unity可以把资源做成Prefab，打到AB里面，加载使用。Unreal资源如何打包？目前看来，蓝图相当于Prefab，Map当中会对Actor及其引用关系，进行序列化。不用蓝图的话，有没有类似于prefab、AB包的东西？</li>
</ul>
<h1 id="零碎知识学习"><a href="#零碎知识学习" class="headerlink" title="零碎知识学习"></a>零碎知识学习</h1><ul>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_19.png" alt=""><br>反射系统使用：<a href="https://zhuanlan.zhihu.com/p/61042237" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/61042237</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_20.png" alt=""><br>Extending C++ To BP: <a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ClassCreation/CodeAndBlueprints/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ClassCreation/CodeAndBlueprints/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_21.png" alt=""><br>Architecture <a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/UnrealArchitecture/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_22.png" alt=""><br>Programming Basics <a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/Basics/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/Basics/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_23.png" alt=""><br>UE Containers:<a href="https://docs.unrealengine.com/4.27/en-US/API/Runtime/Core/Containers/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/API/Runtime/Core/Containers/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_24.png" alt=""><br>UE对工程进行DEBUG：<a href="https://stonelzp.github.io/ue4-debug-your-project/" target="_blank" rel="noopener">https://stonelzp.github.io/ue4-debug-your-project/</a></p>
</li>
</ul>
<p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_25.png" alt=""><br>Unreal 源码解析：<a href="https://edu.uwa4d.com/course-intro/0/374?purchased=false" target="_blank" rel="noopener">https://edu.uwa4d.com/course-intro/0/374?purchased=false</a></p>
<ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_26.png" alt=""><br>资源打包：<a href="https://imzlp.com/posts/22570/#more" target="_blank" rel="noopener">https://imzlp.com/posts/22570/#more</a></li>
</ul>
<p>UnrealBuildTool</p>
<ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_27.png" alt=""><br><a href="http://jazzlost.me/2019/11/24/Unreal-UBT-Modules/" target="_blank" rel="noopener">http://jazzlost.me/2019/11/24/Unreal-UBT-Modules/</a></li>
</ul>
<p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_28.png" alt=""><br><a href="https://www.apude.com/blog/1712.html" target="_blank" rel="noopener">https://www.apude.com/blog/1712.html</a></p>
<p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_29.png" alt=""><br><a href="https://zhuanlan.zhihu.com/p/57186557" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/57186557</a></p>
<p><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_30.png" alt=""><br>UE研发基础命令：<a href="https://www.cnblogs.com/kekec/p/8684068.html" target="_blank" rel="noopener">https://www.cnblogs.com/kekec/p/8684068.html</a></p>
<ul>
<li><img src="assets/9999%20Unreal学习与拓展规划\\en_todo_31.png" alt=""><br>UE Pipeline？ <a href="https://dev.epicgames.com/community/learning/courses/qEl/unreal-engine-technical-guide-to-linear-content-creation-pipeline-development/OP88/unreal-engine-overview-of-pipeline-development" target="_blank" rel="noopener">https://dev.epicgames.com/community/learning/courses/qEl/unreal-engine-technical-guide-to-linear-content-creation-pipeline-development/OP88/unreal-engine-overview-of-pipeline-development</a></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unreal/" rel="tag">Unreal</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unreal-9999-Unreal入门路线"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unreal-9999-Unreal%E5%85%A5%E9%97%A8%E8%B7%AF%E7%BA%BF/"
    >9999 Unreal入门路线</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unreal-9999-Unreal%E5%85%A5%E9%97%A8%E8%B7%AF%E7%BA%BF/" class="article-date">
  <time datetime="2023-07-20T15:00:29.257Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unreal/">Unreal</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <hr>
<p>烟雨迷离的经验</p>
<ul>
<li><p>VS编译C++</p>
</li>
<li><p>IDE： Rider for UE</p>
</li>
<li><p>架构：知乎InsideUE4 公认比较好</p>
</li>
</ul>
<p><img src="assets/9999%20Unreal入门路线/Image.png" alt=""></p>
<p>其他资料</p>
<ul>
<li><p>Exploring in UE4</p>
</li>
<li><p>虚幻引擎 知乎专栏</p>
</li>
<li><p>UE4性能优化</p>
<ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/55335907" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/55335907</a></p>
</li>
<li><p><a href="https://zhuanlan.zhihu.com/p/381890846" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/381890846</a></p>
</li>
</ul>
</li>
<li><p>官方文档</p>
<ul>
<li><p>从Unity角度入门UE4</p>
</li>
<li><p>C++编程教程</p>
</li>
<li><p>动作RPG Sample文档</p>
</li>
<li><p>三消例子文档</p>
</li>
</ul>
</li>
</ul>
<p>我的入门路径：</p>
<ul>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo.png" alt=""><br>环境、IDE配置</p>
<ul>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_1.png" alt=""><br><a href="https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/DevelopmentSetup/VisualStudioSetup/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/DevelopmentSetup/VisualStudioSetup/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_2.png" alt=""><br><a href="https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/DevelopmentSetup/VisualStudioSetup/UnrealVS/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/DevelopmentSetup/VisualStudioSetup/UnrealVS/</a></p>
</li>
</ul>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_3.png" alt=""><br>Unity 入门Unreal<a href="https://docs.unrealengine.com/4.27/en-US/Basics/UnrealEngineForUnityDevs/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/Basics/UnrealEngineForUnityDevs/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_4.png" alt=""><br>Android <a href="https://docs.unrealengine.com/4.27/en-US/SharingAndReleasing/Mobile/Android/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/SharingAndReleasing/Mobile/Android/</a></p>
<ul>
<li><img src="assets/9999%20Unreal入门路线\\en_todo_5.png" alt=""><br>QuickStart</li>
</ul>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_6.png" alt=""><br>集成UWA SDK打包，测试并上传数据</p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_7.png" alt=""><br>批处理自动打包Android，Jenkins集成</p>
</li>
<li></li>
<li><p>FPS Tutorial熟悉 <a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/FirstPersonShooter/</a></p>
<ul>
<li><p><a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPProgrammingQuickStart/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPProgrammingQuickStart/</a></p>
</li>
<li><p><a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/PlayerInput/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/ProgrammingWithCPP/CPPTutorials/PlayerInput/</a></p>
</li>
</ul>
</li>
<li><p>NativizingBlueprints:<a href="https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/Blueprints/TechnicalGuide/NativizingBlueprints/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProgrammingAndScripting/Blueprints/TechnicalGuide/NativizingBlueprints/</a></p>
</li>
</ul>
<hr>
<p><img src="assets/9999%20Unreal入门路线\\en_todo_8.png" alt=""><br>C++和蓝图关系介绍：<a href="https://its201.com/article/weixin_44739495/121107248" target="_blank" rel="noopener">https://its201.com/article/weixin_44739495/121107248</a></p>
<p>UEC++官方教程：</p>
<ul>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_9.png" alt=""><br>编程：<a href="https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_10.png" alt=""><br>快速入门：<a href="https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/CPPProgrammingQuickStart/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ProgrammingWithCPP/CPPProgrammingQuickStart/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_11.png" alt=""><br>基础知识 <a href="https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ClassCreation/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ClassCreation/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_12.png" alt=""><br>仅使用C++：<a href="https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ClassCreation/CodeOnly/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/zh-CN/ProgrammingAndScripting/ClassCreation/CodeOnly/</a></p>
</li>
<li><p><img src="assets/9999%20Unreal入门路线\\en_todo_13.png" alt=""><br>有空看-compiling：<a href="https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/DevelopmentSetup/CompilingProjects/" target="_blank" rel="noopener">https://docs.unrealengine.com/4.27/en-US/ProductionPipelines/DevelopmentSetup/CompilingProjects/</a></p>
</li>
</ul>
<p>零碎性学习（遇到什么学什么）：</p>
<ul>
<li><img src="assets/9999%20Unreal入门路线\\en_todo_14.png" alt=""><br>BluePrint: Unreal中的教程看完</li>
</ul>
<p><a href="https://zhuanlan.zhihu.com/p/34256771" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/34256771</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unreal/" rel="tag">Unreal</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unreal-4-3-Unreal-index"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unreal-4-3-Unreal-index/"
    >4-3 Unreal_index</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unreal-4-3-Unreal-index/" class="article-date">
  <time datetime="2023-07-20T15:00:29.255Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unreal/">Unreal</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><ul>
<li><a href="UE%20-%20Rendering%20Pipeline.html">UE - Rendering Pipeline</a></li>
<li><a href="Unreal%20-%20蓝图Blueprint.html">Unreal - 蓝图Blueprint</a></li>
<li><a href="9999%20Unreal入门路线.html">9999 Unreal入门路线</a></li>
<li><a href="Unreal操作.html">Unreal操作</a></li>
<li><a href="Unity-Unreal.html">Unity-&gt;Unreal</a></li>
<li><a href="【Private】Unreal%20Glossary.html">【Private】Unreal Glossary</a></li>
<li><a href="Build%20-%20Unreal%20Build%20System.html">Build - Unreal Build System</a></li>
<li><a href="9999%20Unreal学习与拓展规划.html">9999 Unreal学习与拓展规划</a></li>
<li><a href="CI实践：Cross-platform%20build%20automation%20for%20UE4%20.html">CI实践：Cross-platform build automation for UE4 projects with Jenkins</a></li>
<li><a href="【CI】Mac自动导入证书.html">【CI】Mac自动导入证书</a></li>
<li><a href="常见问题.html">常见问题</a></li>
<li><a href="UI方案.html">UI方案</a></li>
<li><a href="Unreal插件开发.html">Unreal插件开发</a></li>
<li><a href="Unreal%20C++.html">Unreal C++</a></li>
<li><a href="【C++】常用预处理指令.html">【C++】常用预处理指令</a></li>
<li><a href="Unreal工程目录结构.html">Unreal工程目录结构</a></li>
<li><a href="C++基础补充.html">C++基础补充</a></li>
<li><a href="类与API.html">类与API</a></li>
<li><a href="Actor%20Lifecycle.html">Actor Lifecycle</a></li>
<li><a href="Unreal资源管理.html">Unreal资源管理</a></li>
<li><a href="技术笔记.html">技术笔记</a></li>
<li><a href="遇到的问题及解决.html">遇到的问题及解决</a></li>
<li><a href="Unreal%20c++常见问题.html">Unreal c++常见问题</a></li>
<li><a href="C++基础补充-2.html">C++基础补充-2</a></li>
<li><a href="Unreal%20C++资料整理.html">Unreal C++资料整理</a></li>
<li><a href="%5BTODO%5D解决困惑-Actor与component关系.html">[TODO]解决困惑-Actor与component关系</a></li>
<li><a href="Unreal%20Plugin多个模块开发与编译.html">Unreal Plugin多个模块开发与编译</a></li>
<li><a href="Slate%20UI.html">Slate UI</a></li>
<li><a href="无标题笔记.html">无标题笔记</a></li>
<li><a href="Mipmap与Texture%20Streaming.html">Mipmap与Texture Streaming</a></li>
<li><a href="UDIM贴图.html">UDIM贴图</a></li>
<li><a href="Build%20-%20踩坑.html">Build - 踩坑</a></li>
<li><a href="Build%20-%20UE%20CI.html">Build - UE CI</a></li>
<li><a href="UE%20移动设备调试.html">UE 移动设备调试</a></li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unreal/" rel="tag">Unreal</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unity3D-资源路径与文件加载"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unity3D-%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84%E4%B8%8E%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/"
    >资源路径与文件加载</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unity3D-%E8%B5%84%E6%BA%90%E8%B7%AF%E5%BE%84%E4%B8%8E%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD/" class="article-date">
  <time datetime="2023-07-20T15:00:27.969Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity3D/">Unity3D</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>路径相关的测试：<br><a href="https://zhuanlan.zhihu.com/p/58710435" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/58710435</a><br><a href="https://github.com/Zhunity/UnityPractice/blob/master/Assets/PathTest/PathTest.cs" target="_blank" rel="noopener">https://github.com/Zhunity/UnityPractice/blob/master/Assets/PathTest/PathTest.cs</a></p>
<h2 id="特殊文件夹"><a href="#特殊文件夹" class="headerlink" title="特殊文件夹"></a>特殊文件夹</h2><h3 id="Editor"><a href="#Editor" class="headerlink" title="Editor"></a>Editor</h3><p>可以在根目录下，也可以在子目录里，只要名子叫Editor就可以。<br>Editor下面放的所有资源文件或者脚本文件都不会被打进发布包中，并且脚本也只能在编辑时使用。一般呢会把一些工具类的脚本放在这里，或者是一些编辑时用的DLL。</p>
<h3 id="Editor-Default-Resources"><a href="#Editor-Default-Resources" class="headerlink" title="Editor Default Resources"></a>Editor Default Resources</h3><p>中间是有空格的，必须放在Project视图的根目录下，如果你想放在/xxx/xxx/Editor Default Resources 这样是不行的。<br>把编辑器用到的一些资源放在这里，比如图片、文本文件、等等。它和Editor文件夹一样都不会被打到最终发布包里，仅仅用于开发时使用。你可以直接通过EditorGUIUtility.Load去读取该文件夹下的资源。</p>
<h3 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h3><p>可以在根目录下，也可以在子目录里，只要名子叫Resources就可以。比如目录：/xxx/xxx/Resources 和 /Resources 是一样的，无论多少个叫Resources的文件夹都可以。Resources文件夹下的资源 <strong>不管你用还是不用都会被打包进.apk或者.ipa</strong></p>
<blockquote>
<p>一下建议：<br> 强烈不建议使用Resources系统，原因如下：</p>
<ul>
<li><p>使用Resources文件夹将会使细粒度的内存管理变得更难</p>
</li>
<li><p>对Resources文件夹的不恰当使用会导致应用程序构架和启动时间变长</p>
</li>
<li><p>随着Resources文件夹数量的增加，在这些文件夹中管理Asset将会变得越来越难</p>
</li>
<li><p>使用Resources系统会降低项目向不同平台提供定制内容的能立，并且导致项目无法进行增量内容更新</p>
</li>
<li><p>AssetBundle变体是Unity用来在设备层面调整内容的首选工具。</p>
</li>
</ul>
<p>哪些情况下Resources系统很有用？</p>
<ul>
<li><p>Resources系统简单易用的特点使其非常适合用于快速开发原型。不过，当项目进入正式开发阶段时，应该停止使用Resources文件夹。</p>
</li>
<li><p>Resources文件夹可以用于处理一些简单的内容：</p>
</li>
<li><p>在项目的整个生命周期中都被使用的内容</p>
</li>
<li><p>非内存密集型内容</p>
</li>
<li><p>不太可能添加补丁或者不受平台和设备影响的内容</p>
</li>
<li><p>用于最小化引导的内容 </p>
</li>
</ul>
</blockquote>
<h4 id="Resource-Load"><a href="#Resource-Load" class="headerlink" title="Resource.Load()"></a>Resource.Load()</h4><p>编辑时和运行时都可以通过Resource.Load来直接读取。</p>
<h4 id="Resources-LoadAssetAtPath"><a href="#Resources-LoadAssetAtPath" class="headerlink" title="Resources.LoadAssetAtPath()"></a>Resources.LoadAssetAtPath()</h4><p>它可以读取Assets目录下的任意文件夹下的资源，它可以在 <strong>编辑时或者编辑器运行时用</strong> ，它但是它 <strong>不能在真机上用</strong> ，它的路径是 <strong>“Assets/xx/xx.xxx”</strong> 必须是这种路径，并且 <strong>要带文件的后缀名</strong> 。</p>
<h4 id="AssetDatabase-LoadAssetAtPath"><a href="#AssetDatabase-LoadAssetAtPath" class="headerlink" title="AssetDatabase.LoadAssetAtPath()"></a>AssetDatabase.LoadAssetAtPath()</h4><p>它可以读取Assets目录下的任意文件夹下的资源，它 <strong>只能在编辑时用</strong> 。它的路径是” <strong>Assets/xx/xx.xxx</strong> ” 必须是这种路径，并且 <strong>要带文件的后缀名</strong> 。</p>
<p>我觉得在电脑上开发的时候尽量来用Resource.Load() 或者 Resources.LoadAssetAtPath() ，假如手机上选择一部分资源要打assetbundle，一部分资源Resource.Load().那么在做.apk或者.ipa的时候 现在都是用脚本来自动化打包，在打包之前 可以用AssetDatabase.MoveAsset()把已经打包成assetbundle的原始文件从Resources文件夹下移动出去在打包，这样打出来的运行包就不会包行多余的文件了。打完包以后再把移动出去的文件夹移动回来。</p>
<h3 id="StreamingAssets"><a href="#StreamingAssets" class="headerlink" title="StreamingAssets"></a>StreamingAssets</h3><p>这个文件夹下的资源也会全都打包在.apk或者.ipa 它和Resources的区别是， <strong>Resources会压缩文件</strong> ，但是 <strong>它不会压缩</strong> 原封不动的打包进去。并且它是一个 <strong>只读</strong> 的文件夹，就是程序运行时只能读 不能写。它在各个平台下的路径是不同的，不过你可以用Application.streamingAssetsPath 它会根据当前的平台选择对应的路径。</p>
<p>一般把预制的二进制文件放在里面。</p>
<p>有些游戏为了让所有的资源全部使用assetbundle，会把一些初始的assetbundle放在StreamingAssets目录下，运行程序的时候在把这些assetbundle拷贝在Application.persistentDataPath目录下，如果这些assetbundle有更新的话，那么下载到新的assetbundle在把Application.persistentDataPath目录下原有的覆盖掉。</p>
<h3 id="Application-persistentDataPath"><a href="#Application-persistentDataPath" class="headerlink" title="Application.persistentDataPath"></a>Application.persistentDataPath</h3><p>可读可写。可以是程序的沙盒，也可以是SD Card<br>在打包Android的时候，ProjectSetting页面有个选项: WriteAccess，可以设置他的路径是沙盒还是SD Card。<br>Android上如果保存在沙盒中，需要root才能取出文件。</p>
<p>只有运行时才能在这个路径下写文件。如果要写android交互插件，.java类中是无法访问Unity中的资源的。那么，把资源放在Resources文件夹，在比如Awake函数中把二进制文件copy到persistentDataPath下面，这样C# java两边就都可以访问他了。</p>
<pre><code class="lang-csharp">
string imagePath = Application.persistentDataPath + &quot;/momo.png&quot;; 

if(!System.IO.File.Exists(imagePath)) 

{ 

Texture2D o = Resources.Load(&quot;momo&quot;) as Texture2D; 

System.IO.File.WriteAllBytes(imagePath, o.EncodeToPNG()); 

}
</code></pre>
<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><p>如果做手机游戏开发一般 andoird 或者 ios 要接一些sdk 可以把sdk依赖的库文件放在这里，比如 .so .jar .a 文件。这样打完包以后就会自动把这些文件打在你的包中。</p>
<h3 id="Gizmos"><a href="#Gizmos" class="headerlink" title="Gizmos"></a>Gizmos</h3><p>可以在Scene视图里给某个坐标绘制一个icon。</p>
<pre><code class="lang-csharp">
void OnDrawGizmos() { 

Gizmos.DrawIcon(transform.position, &quot;0.png&quot;, true); 

}
</code></pre>
<p>OnDrawGizmos()方法:<br>比如要做摄像机轨迹，那么肯定是要在Scene视图中做一个预览的线，那么用Gizmos.DrawLine 和Gizmos.DrawFrustum就再好不过了。</p>
<h2 id="PC上读取文件"><a href="#PC上读取文件" class="headerlink" title="PC上读取文件"></a>PC上读取文件</h2><p>Application.dataPath路径在PC上：无论是Editor还是运行时都毫无压力非常万能(但在手机上无用)</p>
<h3 id="读取XML文件并生成一个类"><a href="#读取XML文件并生成一个类" class="headerlink" title="读取XML文件并生成一个类"></a>读取XML文件并生成一个类</h3><pre><code class="lang-csharp">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;test&gt;

&lt;name&gt;chenjd&lt;/name&gt;

&lt;blog&gt;http://www.cnblogs.com/murongxiaopifu/&lt;/blog&gt;

&lt;organization&gt;Fanyoy&lt;/organization&gt;

&lt;age&gt;25&lt;/age&gt;

&lt;/test&gt;

``` ```csharp 

void Start() { 

XElement result = LoadXML(&quot;Assets/aa/bb/Test.xml&quot;); 

} 

void LoadXML(string path) { 

XElement xml = XElement.Load(path); 

return xml; 

}
</code></pre>
<h2 id="移动平台的资源路径"><a href="#移动平台的资源路径" class="headerlink" title="移动平台的资源路径"></a>移动平台的资源路径</h2><h3 id="Application-streamingAssetsPath"><a href="#Application-streamingAssetsPath" class="headerlink" title="Application.streamingAssetsPath"></a>Application.streamingAssetsPath</h3><p>只读路径。</p>
<p>在Unity的Assets/目录下创建名为StreamingAssets文件夹即可。</p>
<p>Application.dataPath: 程序的数据文件所在文件夹。在Editor中就是Assets<br>安卓: /data/app/xxx.xxx.xxx.apk<br>iOS: Application/xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/xxx.app/Data</p>
<p>Application.streamingAssetsPath: 流数据的缓存目录，为相对路径，适合设置一些外部数据文件<br>安卓: jar:file:///data/app/xxx.xxx.xxx.apk/!/assets<br>iOS: Application/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/xxx.app/Data/Raw</p>
<p>Application.persistentDataPath: 持久化数据存储目录的路径，可用于存储一些持久化的数据文件<br>安卓: /data/data/xxx.xxx.xxx/files<br>iOS: Application/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/Documents</p>
<p>Application.temporaryCachePath: 临时数据的缓存目录<br>安卓: /data/data/xxx.xxx.xxx/cache<br>iOS: Application/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/Library/Caches</p>
<p>dataPath和streamingAssetsPath一般是相对程序的安装目录位置<br>persistentDataPath和temporaryCachePath一般是与系统有关的固定位置</p>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a href="https://www.cnblogs.com/FudgeBear/p/10513784.html" target="_blank" rel="noopener">https://www.cnblogs.com/FudgeBear/p/10513784.html</a><br><a href="https://www.xuanyusong.com/archives/4033" target="_blank" rel="noopener">https://www.xuanyusong.com/archives/4033</a><br><a href="http://www.xuanyusong.com/archives/2656" target="_blank" rel="noopener">http://www.xuanyusong.com/archives/2656</a><br><a href="https://www.xuanyusong.com/archives/3229" target="_blank" rel="noopener">https://www.xuanyusong.com/archives/3229</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unity3D-资源管理工具"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unity3D-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"
    >资源管理工具</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unity3D-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/" class="article-date">
  <time datetime="2023-07-20T15:00:27.966Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity3D/">Unity3D</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><a href="https://github.com/GameBuildingBlocks/UnityComponent/tree/2b5ca4c2d6bf0f036c8bd60adf244d89655b3438" target="_blank" rel="noopener">https://github.com/GameBuildingBlocks/UnityComponent/tree/2b5ca4c2d6bf0f036c8bd60adf244d89655b3438</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unity3D-资源与内存-加载、卸载、Destroy"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unity3D-%E8%B5%84%E6%BA%90%E4%B8%8E%E5%86%85%E5%AD%98-%E5%8A%A0%E8%BD%BD%E3%80%81%E5%8D%B8%E8%BD%BD%E3%80%81Destroy/"
    >资源与内存(加载、卸载、Destroy)</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unity3D-%E8%B5%84%E6%BA%90%E4%B8%8E%E5%86%85%E5%AD%98-%E5%8A%A0%E8%BD%BD%E3%80%81%E5%8D%B8%E8%BD%BD%E3%80%81Destroy/" class="article-date">
  <time datetime="2023-07-20T15:00:27.964Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity3D/">Unity3D</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Unity文件，文件引用，meta详解"><a href="#Unity文件，文件引用，meta详解" class="headerlink" title="Unity文件，文件引用，meta详解"></a>Unity文件，文件引用，meta详解</h2><h3 id="Assets目录下常见的文件类型"><a href="#Assets目录下常见的文件类型" class="headerlink" title="Assets目录下常见的文件类型"></a>Assets目录下常见的文件类型</h3><h4 id="资源文件-ImportedAsset"><a href="#资源文件-ImportedAsset" class="headerlink" title="资源文件(ImportedAsset)"></a>资源文件(ImportedAsset)</h4><p>创建好的，并且不再修改的文件：FBX文件，贴图文件，音频文件，视频文件，动画文件<br>导入时进行转化，每一个类型都对应一个AssetImporter<br>点击这样的资源，在Inspector面板会出现设置界面</p>
<h4 id="代码文件"><a href="#代码文件" class="headerlink" title="代码文件"></a>代码文件</h4><p>代码文件包括所有的代码文件，代码库文件，shader文件等，在导入时，unity会进行一次编译。</p>
<h4 id="序列化文件-Native-Asset"><a href="#序列化文件-Native-Asset" class="headerlink" title="序列化文件(Native Asset)"></a>序列化文件(Native Asset)</h4><p>序列化文件通常是指unity能够序列化的文件，一般是unity自身的一些类型。比如prefab(预制体)，unity3d(场景)文件，asset(ScriptableObject)文件.mat文件(材质球)，这些文件能够在运行时直接反序列化为对应类的一个实例。</p>
<h4 id="文本文档"><a href="#文本文档" class="headerlink" title="文本文档"></a>文本文档</h4><p>不是序列化文件，但是unity可以识别为TextAsset。<br>很像资源文件，但是又不需要资源文件那样进行设置和转化。<br>如txt、xml文件等等</p>
<h4 id="非序列化文件"><a href="#非序列化文件" class="headerlink" title="非序列化文件"></a>非序列化文件</h4><p>非序列文件是Unity无法识别的文件，比如文件夹</p>
<h4 id="Meta文件"><a href="#Meta文件" class="headerlink" title="Meta文件"></a>Meta文件</h4><p>meta文件在unity中的作用非常关键，它有2个作用</p>
<ul>
<li><p>定义在它同目录下，同名的非meta文件的唯一ID：GUID。而对于unity的序列化文件来说，引用的对象用的就是这个GUID。所以一旦meta中的GUID变更了，就要注意，它很可能引起一场引用丢失的灾难</p>
</li>
<li><p>存储资源文件的ImportSetting数据。在上文中资源文件是有ImportSetting数据的，这个数据正数存储在meta文件中。ImportSetting中专门有存储Assetbundle相关的数据。这些数据帮助编辑器去搜集所有需要打包的文件并分门别类。所以每一次修改配置都会修改meta文件。</p>
</li>
</ul>
<h3 id="Meta文件详解——Unity-GUID-LocalID系统"><a href="#Meta文件详解——Unity-GUID-LocalID系统" class="headerlink" title="Meta文件详解——Unity GUID/LocalID系统"></a>Meta文件详解——Unity GUID/LocalID系统</h3><p>meta文件——文本文档，YAML格式写的（序列化文件都是用这个格式写）</p>
<h4 id="GUID"><a href="#GUID" class="headerlink" title="GUID"></a>GUID</h4><p>guid代表该文件，无论什么类型（甚至是文件夹）。<br>通过GUID就可以找到工程中的这个文件，无论它在项目的什么位置。<br>在编辑器中使用AssetDatabase.GUIDToAssetPath和AssetDatabase.AssetPathToGUID进行互转。</p>
<h4 id="ImportSetting数据"><a href="#ImportSetting数据" class="headerlink" title="ImportSetting数据"></a>ImportSetting数据</h4><p>根据不同的文件类型，它的数据是不同的ImportSetting数据（Inspector面板设置），比如上面的NativeFormatImporter，ModelImporter，AudioImporter等等。把一个文件和这个文件的meta文件从一个Unity工程复制到另一个Unity工程中，它的配置是不会变的。（将fbx和它的meta文件拷贝到另一个工程，不需要重新裁剪动画）</p>
<h4 id="FileID（LocalID）"><a href="#FileID（LocalID）" class="headerlink" title="FileID（LocalID）"></a>FileID（LocalID）</h4><p>如果是一个图集，下面有若干个图片，那么就需要另外一个ID来表示，这就是LocalID（meta文件名为: FileID。）</p>
<ul>
<li><p>对于资源文件，非序列化文件，由于一般不会去更改源文件，所以FileID存储在meta文件中。</p>
</li>
<li><p>对于序列化文件，自身数据里面会存储自身的FileID，也会记录所有子文件的FileID</p>
</li>
</ul>
<blockquote>
<p>所以在每次svn提交时如果发现有meta文件变更，一定要打开看一下。看看这个guid是否被更改。理论上是不需要更改的。</p>
</blockquote>
<h3 id="序列化文件详解——Unity文件引用系统"><a href="#序列化文件详解——Unity文件引用系统" class="headerlink" title="序列化文件详解——Unity文件引用系统"></a>序列化文件详解——Unity文件引用系统</h3><p>用sublime打开一个Scene文件(.unity)，<br>大概的数据：</p>
<ul>
<li><p>OcclusionCullingSettings裁剪数据（菜单Window-&gt;Occlusion面板中的数据）</p>
</li>
<li><p>RenderSettings（菜单Window-&gt;Lighting-&gt;Settings面板中的部分数据）</p>
</li>
<li><p>LightmapSettings（菜单Window-&gt;Lighting-&gt;Settings面板中的其他部分数据）</p>
</li>
<li><p>NavMeshSettings（菜单Window-&gt;Navigation面板中的数据）</p>
</li>
<li><p>之后就是场景中的GameObject的数据</p>
</li>
</ul>
<h4 id="GameObject数据"><a href="#GameObject数据" class="headerlink" title="GameObject数据"></a>GameObject数据</h4><p>Name就是Main Camera<br>某个物体上有4个组件，每个组件有一个FileID，然后在需要引用时，使用这些FileID即可。实例化一个这样的GameObject时，只要依照次序，依次创建物体，组件，初始化数据并进行引用绑定即可在场景中生成一个实例。</p>
<blockquote>
<p>在Inspector面板中的右上角点击，然后选择Debug转成Debug模式下的Inspector面板。<br> 在Hierarchy面板中选中Main Camera可以看到如图所示，所有的组件的LocalIdentfierInFile的值就是刚刚在Sublime中看到的数据</p>
</blockquote>
<ul>
<li><p><strong>InstanceID</strong> 是unity中一个实例的ID。</p>
</li>
<li><p>每一个Unity实例都会有一个InstanceID。在运行时，用UnityEngine.Object的GetInstanceID获取（《Unity编辑器下和运行时的加载过程》）</p>
</li>
</ul>
<h4 id="组件数据"><a href="#组件数据" class="headerlink" title="组件数据"></a>组件数据</h4><p>在GameObject之后就是组件数据。可以结合Unity中这个组件的面板来了解每一个数据的意义。</p>
<blockquote>
<p>组件FlareLayer，在YAML里面只是一个Behaviour（所有Behaviour组件都看不到类型名字），怎么样才能知道他是一个FlareLayer？<br> FileID左边我们看到一个124。每一个unity类型都有一个对应的数字。<br> 参考：<a href="https://docs.unity3d.com/Manual/ClassIDReference.html" target="_blank" rel="noopener">https://docs.unity3d.com/Manual/ClassIDReference.html</a></p>
</blockquote>
<p>任何一个文件都可以通过GUID找到，然后通过FileID找到它内部的子文件。所以这样就能识别出这个具体是什么类了。</p>
<h4 id="Prefab数据"><a href="#Prefab数据" class="headerlink" title="Prefab数据"></a>Prefab数据</h4><p>在YAML的最下面有一个数据是Prefab数据，保存了最重要的几个数据：<br>Modification：每个组件的修改数据列表，但凡修改的数据，都会在这里体现。记录了：哪个资源（GUID）的哪个组件(FileID)的哪个成员(PropertyPath)的值(value)发生了改变。<br>ParentPrefab：表示是哪一个Prefab。</p>
<p><img src="资源与内存\(加载、卸载、Destroy\" alt="Alt text"><br>_files/289969-20180402204239871-1854753914.png)</p>
<h2 id="资源导入"><a href="#资源导入" class="headerlink" title="资源导入"></a>资源导入</h2><p>Unity automatically imports assets and manages various kinds of additional data about them for you, such as what import settings should be used to import the asset, and where the asset is used throughout your project. </p>
<h3 id="What-happens-when-Unity-imports-an-Asset"><a href="#What-happens-when-Unity-imports-an-Asset" class="headerlink" title="What happens when Unity imports an Asset?"></a>What happens when Unity imports an Asset?</h3><ol>
<li>A Unique ID is assigned<br>This ID is used internally by Unity to refer to the asset which means the asset can be moved or renamed without references to the asset breaking.</li>
</ol>
<blockquote>
<p>the editor frequently checks the contents of the Assets folder against the list of assets it already knows about.</p>
</blockquote>
<ol>
<li>A .meta file is created</li>
</ol>
<blockquote>
<p>If an asset loses its meta file (for example, if you moved or renamed the asset outside of Unity, without moving/renaming the corresponding .meta file), any reference to that asset will be broken. Unity would generate a new .meta file for the moved/renamed asset as if it were a brand new asset, and delete the old “orphaned” .meta file.</p>
</blockquote>
<ol>
<li>The source asset is processed<br>Unity reads and processes any files that you add to the Assets folder, converting the contents of the file to internal game-ready versions of the data. The actual asset files remain unmodified, and the processed and converted versions of the data are stored in the project’s <strong>Library</strong> folder.</li>
</ol>
<blockquote>
<p>the Photoshop file format is convenient to work with and can be saved directly into your Assets folder, but hardware such as mobile devices and PC graphics cards can’t accept that format directly to render as textures. All the data for Unity’s internal representation of your assets is stored in the Library folder which can be thought of as similar to a cache folder. As a user, you should never have to alter the Library folder manually and attempting to do so may affect the functioning of the project in the Unity editor. However, it is always safe to delete the Library folder (while the project is not open in Unity) as all its data is generated from what is stored in the Assets and ProjectSettings folders. This also means that the Library folder should not be included in version control. </p>
<p>Sometimes multiple assets are created from an import</p>
<ul>
<li><p>A 3D file, such as an FBX, defines Materials and/or contains embedded Textures.</p>
</li>
<li><p>An image file imported as multiple sprites.</p>
</li>
<li><p>A 3D file contains multiple animation timelines, or has multiple separate clips defined within its animation import settings.</p>
</li>
</ul>
</blockquote>
<h3 id="The-import-settings-can-alter-the-processing-of-the-asset"><a href="#The-import-settings-can-alter-the-processing-of-the-asset" class="headerlink" title="The import settings can alter the processing of the asset"></a>The import settings can alter the processing of the asset</h3><p>As well as the unique ID assigned to the asset, the meta files contain values for all the import settings you see in the inspector when you have an asset selected in your project window. For a texture, this includes settings such as the Texture Type, Wrap Mode, Filter Mode and Aniso Level.</p>
<p>If you change the import settings for an asset, those changed settings are stored in the .meta file accompanying the asset. The asset will be re-imported according to your new settings, and the corresponding imported “game-ready” data will be updated in the project’s Library folder.</p>
<h2 id="AssetDatabase"><a href="#AssetDatabase" class="headerlink" title="AssetDatabase"></a>AssetDatabase</h2><p>AssetDatabase is an API which allows you to access the assets contained in your project. Among other things, it provides methods to find and load assets and also to create, delete and modify them. The Unity Editor uses the AssetDatabase internally to keep track of asset files and maintain the linkage between assets and objects that reference them.</p>
<h3 id="Importing-an-Asset"><a href="#Importing-an-Asset" class="headerlink" title="Importing an Asset"></a>Importing an Asset</h3><h3 id="Loading-an-Asset"><a href="#Loading-an-Asset" class="headerlink" title="Loading an Asset"></a>Loading an Asset</h3><h3 id="File-Operations-using-the-AssetDatabase"><a href="#File-Operations-using-the-AssetDatabase" class="headerlink" title="File Operations using the AssetDatabase"></a>File Operations using the AssetDatabase</h3><h3 id="Using-AssetDatabase-Refresh"><a href="#Using-AssetDatabase-Refresh" class="headerlink" title="Using AssetDatabase.Refresh"></a>Using AssetDatabase.Refresh</h3><p>When you have finished modifying assets, you should call AssetDatabase.Refresh to commit your changes to the database and make them visible in the project.</p>
<h3 id="CreateAssets-amp-FindAssets-amp-ScriptableObject"><a href="#CreateAssets-amp-FindAssets-amp-ScriptableObject" class="headerlink" title="CreateAssets &amp; FindAssets &amp; ScriptableObject"></a>CreateAssets &amp; FindAssets &amp; ScriptableObject</h3><ol>
<li><p>对于ScriptableObject，使用CreateInstance来创建Asset实例对象<br><code>testI = (ScriptObj)ScriptableObject.CreateInstance(typeof(ScriptObj));</code></p>
</li>
<li><p>对于其他资源类型，使用new来创建对象</p>
</li>
<li><p>然后调用 <code>AssetDatabase.CreateAsset</code>函数，将实例对象作为资源存储在Assets路径当中。</p>
</li>
<li><p>最后使用<code>AssetDatabase.FindAssets</code>获取相应资源的GUID</p>
</li>
<li><p>由 <code>AssetDatabase.GUIDToAssetPath</code> 获取相应资源的路径。</p>
</li>
</ol>
<pre><code class="lang-csharp">
// This script file has two CS classes. The first is a simple Unity ScriptableObject script.

// The class it defines is used by the Example class below.

// (This is a single Unity script file. You could split this file into a ScriptObj.cs and an

// Example.cs file which is more structured.)

using UnityEngine; 

using UnityEditor; 

public class ScriptObj : ScriptableObject

{ 

public void Awake()

{ 

Debug.Log(&quot;ScriptObj created&quot;); 

} 

} 

// Use ScriptObj to show how AssetDabase.FindAssets can be used

public class Example

{ 

static ScriptObj testI; 

static ScriptObj testJ; 

static ScriptObj testK; 

[MenuItem(&quot;Examples/FindAssets Example two&quot;)] 

static void ExampleScript()

{ 

CreateAssets(); 

NamesExample(); 

LabelsExample(); 

TypesExample(); 

} 

static void CreateAssets()

{ 

testI = (ScriptObj)ScriptableObject.CreateInstance(typeof(ScriptObj)); 

AssetDatabase.CreateAsset(testI, &quot;Assets/AssetFolder/testI.asset&quot;); 

testJ = (ScriptObj)ScriptableObject.CreateInstance(typeof(ScriptObj)); 

AssetDatabase.CreateAsset(testJ, &quot;Assets/AssetFolder/testJ.asset&quot;); 

// create an asset in a sub-folder and with a name which contains a space

testK = (ScriptObj)ScriptableObject.CreateInstance(typeof(ScriptObj)); 

AssetDatabase.CreateAsset(testK, &quot;Assets/AssetFolder/SpecialFolder/testK example.asset&quot;); 

// an asset with a material will be used later

Material material = new Material(Shader.Find(&quot;Standard&quot;)); 

AssetDatabase.CreateAsset(material, &quot;Assets/AssetFolder/SpecialFolder/MyMaterial.mat&quot;); 

} 

static void NamesExample()

{ 

Debug.Log(&quot;*** FINDING ASSETS BY NAME ***&quot;); 

string[] results; 

results = AssetDatabase.FindAssets(&quot;testI&quot;); 

foreach (string guid in results) 

{ 

Debug.Log(&quot;testI: &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

results = AssetDatabase.FindAssets(&quot;testJ&quot;); 

foreach (string guid in results) 

{ 

Debug.Log(&quot;testJ: &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

results = AssetDatabase.FindAssets(&quot;testK example&quot;); 

foreach (string guid in results) 

{ 

Debug.Log(&quot;testK example: &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

Debug.Log(&quot;*** More complex asset search ***&quot;); 

// find all assets that contain test (which is all assets)

results = AssetDatabase.FindAssets(&quot;test&quot;); 

foreach (string guid in results) 

{ 

Debug.Log(&quot;name:test - &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

} 

static void LabelsExample()

{ 

Debug.Log(&quot;*** FINDING ASSETS BY LABELS ***&quot;); 

string[] setLabels; 

setLabels = new string[] {&quot;wrapper&quot;}; 

AssetDatabase.SetLabels(testI, setLabels); 

setLabels = new string[] {&quot;bottle&quot;, &quot;banana&quot;, &quot;carrot&quot;}; 

AssetDatabase.SetLabels(testJ, setLabels); 

setLabels = new string[] {&quot;swappable&quot;, &quot;helmet&quot;}; 

AssetDatabase.SetLabels(testK, setLabels); 

// label searching:

// testI has wrapper, testK has swappable, so both have &#39;app&#39;

// testJ has bottle, so have a label searched as &#39;bot&#39;

string[] getGuids = AssetDatabase.FindAssets(&quot;l:app l:bot&quot;); 

foreach (string guid in getGuids) 

{ 

Debug.Log(&quot;label lookup: &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

} 

static void TypesExample()

{ 

Debug.Log(&quot;*** FINDING ASSETS BY TYPE ***&quot;); 

string[] guids; 

// search for a ScriptObject called ScriptObj

guids = AssetDatabase.FindAssets(&quot;t:ScriptObj&quot;); 

foreach (string guid in guids) 

{ 

Debug.Log(&quot;ScriptObj: &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

guids = AssetDatabase.FindAssets(&quot;t:ScriptObj l:helmet&quot;); 

foreach (string guid in guids) 

{ 

Debug.Log(&quot;ScriptObj+bottle: &quot; \+ AssetDatabase.GUIDToAssetPath(guid)); 

} 

} 

}
</code></pre>
<h2 id="AssetBundle"><a href="#AssetBundle" class="headerlink" title="AssetBundle"></a>AssetBundle</h2><p><a href="https://blog.csdn.net/qq_35361471/article/details/82854560" target="_blank" rel="noopener">https://blog.csdn.net/qq_35361471/article/details/82854560</a></p>
<h2 id="资源卸载（Unload-amp-Destroy）"><a href="#资源卸载（Unload-amp-Destroy）" class="headerlink" title="资源卸载（Unload &amp; Destroy）"></a>资源卸载（Unload &amp; Destroy）</h2><h3 id="Destroy"><a href="#Destroy" class="headerlink" title="Destroy"></a>Destroy</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>UNITY Destroy()和DestroyImadiate()都不会立即释放对象内存<br>DestroyImadiate是立即将物体从场景hierachy中移除，并标记为 “null”，注意 是带引号的null。这是UNITY内部的一个处理技巧。关于这个技巧有很争议。<br>Destroy要等到帧末才会将物体从场景层级中移除并标记为”null”。</p>
<p>不管如何，二者都只是UNITY引擎层面的标记与处理，但在.NET底层，对象的内存都没有释放，只有手动GC.Collect()或等待NET去GC时才会释放掉对象内存。<br>如果该对象在其他地方还有引用的话，GC也无法将对象的内存释放。</p>
<h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><p>（1）obj并不会立即销毁，而是需要等待下一个Update更新，所以还是可以被print出来；<br>（2）DestroyImmediate立即对对像进行销毁，print出来是null；<br>（3）Destroy销毁场景中的物体，但内存中还存在，当令它需要销毁时，只是给一个标识。而内存中它依然是存在的，只有当内存不够，或一段时间没有再次被引用时（或者更多合理的条件满足），机制才会将它销毁并释放内存；<br>（4）这样做的目的就是为了避免频繁对内存的读写操作。回收器会定时清理一次内存中引用计数为0的对象，很可能你的要销毁的对象在其他地方还有引用而你自己不清楚，直接销毁可能导致其他地方空引用错误；<br>（5）建议使用平常Destroy函数，而不是DestroyImmediate函数；</p>
<h4 id="作用对象"><a href="#作用对象" class="headerlink" title="作用对象"></a>作用对象</h4><p>GameObject、Component这样的在内存当中的实例，可以直接销毁，销毁掉后对硬盘上的资源是没有影响的。<br>Load进来的资源文件（Texture等）不可以使用DestroyImmediate(obj)直接销毁。如果使用DestroyImmediate(obj, true)接口，可以销毁。对于序列化文件等Unity可以直接识别和接管的文件，相应的资源文件会销毁掉，而对于Texture这样的资源，Unity无法识别资源原始的图片，只能识别导入后加入Library中的文件，则会销毁Library中相应的资源，并断掉对该资源的引用（路径上就找不到该资源了）。而对于图片，由于原始文件没有被销毁，重新打开项目后，该图片会重新被Import进来。</p>
<p>总之，Destroy接口本身是不应该用来销毁资源的。</p>
<p>如果在游戏当中把资源Destroy掉，下次打开游戏，这个资源就没有了，加载不到了。</p>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>测试代码如下：点ADD按钮不断创建对象，点DEL按钮清除所有对象，通过观察进程内存数值来察看对象内存是否释放。</p>
<pre><code class="lang-csharp">
using System.Collections; 

using System.Collections.Generic; 

using System.Diagnostics; 

using UnityEngine; 

using UnityEngine.UI; 

public class MyGo : MonoBehaviour

{ 

byte[] data = new byte[83000]; 

} 

public class testad : MonoBehaviour { 

Transform objs; 

Text txt; 

Process proc; 

void Start () { 

var btnadd = transform.Find(&quot;btnAdd&quot;).GetComponent&lt;Button&gt;(); 

btnadd.onClick.AddListener(OnClckAdd); 

var btndel = transform.Find(&quot;btnDel&quot;).GetComponent&lt;Button&gt;(); 

btndel.onClick.AddListener(OnClckDel); 

objs = transform.Find(&quot;objs&quot;); 

txt = transform.Find(&quot;Text&quot;).GetComponent&lt;Text&gt;(); 

proc = Process.GetCurrentProcess(); 

} 

void OnClckAdd()

{ 

for (int i = 0; i &lt; 20; ++i) 

{ 

var go = new GameObject(); 

go.AddComponent&lt;MyGo&gt;(); 

go.transform.SetParent(objs); 

} 

} 

void OnClckDel()

{ 

for (int i = objs.childCount - 1; i &gt;= 0; i--) 

{ 

GameObject.DestroyImmediate(objs.GetChild(i).gameObject); 

} 

System.GC.Collect(); 

} 

// Update is called once per frame

float timer = 0; 

void Update () 

{ 

if (timer &gt; 0.5f) 

{ 

timer = 0; 

txt.text = ((int)(proc.WorkingSet64 / 1024)).ToString(); 

} 

timer += Time.deltaTime; 

} 

}
</code></pre>
<h4 id="Resources-UnloadUnusedAssets"><a href="#Resources-UnloadUnusedAssets" class="headerlink" title="Resources.UnloadUnusedAssets"></a>Resources.UnloadUnusedAssets</h4><p>运行中卸载，可能是在帧末尾卸载</p>
<h4 id="Resources-UnloadAsset"><a href="#Resources-UnloadAsset" class="headerlink" title="Resources.UnloadAsset()"></a>Resources.UnloadAsset()</h4><p>对于场景当中的特定资源，如果相机照射到他或者在脚本中有对资源的引用的话就无法卸载。<br>如果相机没有看到他，并且没有被引用到，那么该资源会在内存当中被卸载。而若下次引用到他，或者相机照射到他，那么该资源会被重新加载到内存当中。</p>
<h4 id="EditorUtility-UnloadUnusedAssets"><a href="#EditorUtility-UnloadUnusedAssets" class="headerlink" title="EditorUtility.UnloadUnusedAssets"></a>EditorUtility.UnloadUnusedAssets</h4><p>编辑器下的卸载资源接口。</p>
<h2 id="资源卸载与内存管理问题的处理经验"><a href="#资源卸载与内存管理问题的处理经验" class="headerlink" title="资源卸载与内存管理问题的处理经验"></a>资源卸载与内存管理问题的处理经验</h2><ol>
<li><p>Editor中的脚本对物体的引用无法用Memory Profiler检测到，因为Editor脚本对MemoryProfiler是不可见的。</p>
</li>
<li><p>只要脚本中有对Texture等资源实例的引用，那么相应的资源就无法卸载掉。</p>
</li>
<li><p>EditorUtility.UnloadUnusedAssets确实可以卸载没有被引用的资源对象，但是不会一调用就立即卸载掉，可能稍等一会儿才会卸载掉。所以，在这个函数调用过后立即检测内存，是看不出来卸载的效果的，过一小段时间后，再打印内存，就可以看到卸载的效果。根据对内存的监控可以判断：刚刚调用Unload资源函数的时候，内存不会立即释放，在下次加载资源的时候，会进行内存释放操作。</p>
</li>
<li><p>把加载进内存的对象直接Destroy掉，就不会占用内存，不需要调用Unload函数也可以。 如果把对资源的引用设置为null，不调用unload函数的话，资源会留在内存当中，只有调用unload之后，资源才会被卸载</p>
</li>
</ol>
<h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><p><a href="https://www.cnblogs.com/CodeGize/p/8697227.html" target="_blank" rel="noopener">https://www.cnblogs.com/CodeGize/p/8697227.html</a><br><a href="https://www.cnblogs.com/timeObjserver/p/7575035.html" target="_blank" rel="noopener">https://www.cnblogs.com/timeObjserver/p/7575035.html</a><br><a href="https://docs.unity3d.com/2017.2/Documentation/Manual/BehindtheScenes.html" target="_blank" rel="noopener">https://docs.unity3d.com/2017.2/Documentation/Manual/BehindtheScenes.html</a></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unity3D-获取场景点数和面数"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unity3D-%E8%8E%B7%E5%8F%96%E5%9C%BA%E6%99%AF%E7%82%B9%E6%95%B0%E5%92%8C%E9%9D%A2%E6%95%B0/"
    >获取场景点数和面数</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unity3D-%E8%8E%B7%E5%8F%96%E5%9C%BA%E6%99%AF%E7%82%B9%E6%95%B0%E5%92%8C%E9%9D%A2%E6%95%B0/" class="article-date">
  <time datetime="2023-07-20T15:00:27.953Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity3D/">Unity3D</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><pre><code class="lang-csharp">
int tris = 0, verts = 0; 

//GameObject[] gameObjects = Resources.FindObjectsOfTypeAll&lt;GameObject&gt;();

GameObject[] gameObjects = GameObject.FindObjectsOfType&lt;GameObject&gt;() as GameObject[]; 

foreach (GameObject go in gameObjects) 

{ 

//Component[] filters;

//filters = go.GetComponentsInChildren&lt;MeshFilter&gt;();

//Debug.Log(filters.Length);

//foreach (MeshFilter f in filters)

//{

// tris += f.sharedMesh.triangles.Length / 3;

// verts += f.sharedMesh.vertexCount;

//}

MeshFilter filter; 

filter = go.GetComponent&lt;MeshFilter&gt;(); 

if(filter != null) 

{ 

Debug.Log(go.name); 

tris += filter.sharedMesh.triangles.Length / 3; 

verts += filter.sharedMesh.vertexCount; 

} 

} 

Debug.Log(&quot;verts number: &quot; \+ verts); 

Debug.Log(&quot;trises number: &quot; \+ tris); 

Debug.Log(gameObjects.Length); 

Debug.Log(&quot;Code Test---&quot;);
</code></pre>
<h4 id="z"><a href="#z" class="headerlink" title="z"></a>z</h4> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unity3D-编辑器扩展"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unity3D-%E7%BC%96%E8%BE%91%E5%99%A8%E6%89%A9%E5%B1%95/"
    >编辑器扩展</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unity3D-%E7%BC%96%E8%BE%91%E5%99%A8%E6%89%A9%E5%B1%95/" class="article-date">
  <time datetime="2023-07-20T15:00:27.951Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity3D/">Unity3D</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="菜单项"><a href="#菜单项" class="headerlink" title="菜单项"></a>菜单项</h2><h3 id="MenuItem"><a href="#MenuItem" class="headerlink" title="MenuItem"></a>MenuItem</h3><h4 id="常用的菜单那位置"><a href="#常用的菜单那位置" class="headerlink" title="常用的菜单那位置"></a>常用的菜单那位置</h4><ol>
<li><p>整个Unity编辑器顶头的菜单栏；</p>
</li>
<li><p>Inspector挂Component的；</p>
</li>
<li><p>Hierarchy游戏物体节点树的；</p>
</li>
<li><p>Project游戏资源文件的。</p>
</li>
</ol>
<h4 id="验证菜单栏"><a href="#验证菜单栏" class="headerlink" title="验证菜单栏"></a>验证菜单栏</h4><p>为某个菜单项写一个bool方法。<br>第二个参数表示，是否为验证函数</p>
<pre><code class="lang-csharp">
[MenuItem(&quot;MyMenu/LogTransFormname&quot;)] 

static void LogTransformName()

{ 

Debug.Log(&quot;TransformName is &quot;+Selection.activeTransform.name); 

} 

[MenuItem(&quot;MyMenu/LogTransFormname&quot;,true)] 

static bool ValidatedLogTransformName()

{ 

return Selection.activeTransform!=null; 

}
</code></pre>
<h4 id="自定义快捷键"><a href="#自定义快捷键" class="headerlink" title="自定义快捷键"></a>自定义快捷键</h4><p>菜单名称+空格+快捷键<br>_g 按下字母g<br>修饰符: % Ctrl; # Shift; &amp; Alt<br>LEFT、RIGHT、UP、DOWN、F1..F12、HOME、END、PGUP、PGDN</p>
<pre><code class="lang-csharp">
[MenuItem(&quot;MyMenu/AddKey %j&quot;)] 

static void AddKey()

{ 

Debug.Log(&quot;this is addKey&quot;); 

}
</code></pre>
<h4 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h4><p>默认为1000<br>差距为11以上分组</p>
<h4 id="给组件或脚本添加右键方法（Inspector）"><a href="#给组件或脚本添加右键方法（Inspector）" class="headerlink" title="给组件或脚本添加右键方法（Inspector）"></a>给组件或脚本添加右键方法（Inspector）</h4><p>传入参数 MenuCommand<br>command.context : 被右键点击的脚本对象</p>
<pre><code class="lang-csharp">
[MenuItem(&quot;CONTEXT/Transform/DoubleTran&quot;)] 

static void DoubleTran(MenuCommand command)

{ 

Transform body =(Transform)command.context; 

body.position*=2; 

Debug.Log(&quot;doubleTrans is&quot;+body.position); 

}
</code></pre>
<h4 id="其他位置"><a href="#其他位置" class="headerlink" title="其他位置"></a>其他位置</h4><pre><code class="lang-csharp">
//Hierarchy窗口下

[MenuItem(&quot;GameObject/Test2&quot;, false, 11)] 

public static void PasteTRValue()

{ 

Debug.Log(&quot;Test2&quot;); 

} 

//Project窗口下

[MenuItem(&quot;Assets/Test3&quot;, false)] 

public static void Test3()

{ 

Debug.Log(&quot;Test3&quot;); 

}
</code></pre>
<h3 id="ContextMenu-amp-ContextMenuItem"><a href="#ContextMenu-amp-ContextMenuItem" class="headerlink" title="ContextMenu &amp; ContextMenuItem"></a>ContextMenu &amp; ContextMenuItem</h3><ul>
<li><p>写在本身Component脚本中，隶属于UnityEngine命名空间，会被打包。</p>
</li>
<li><p>功能和参数与MenuItem完全一致</p>
</li>
<li><p>非静态</p>
</li>
</ul>
<p>ContextMenuItem: 给你在右键变量名称时添加菜单<br>参数:1.菜单的名称；2.菜单执行的方法，要求脚本中必须有；3.按钮的先后顺序。</p>
<pre><code class="lang-csharp">
using UnityEngine; 

public class Clock : MonoBehaviour

{ 

[ContextMenuItem(&quot;Add Hour&quot;, &quot;AddHour&quot;, order = 1)] 

public int Hour = 10; 

public void AddHour()

{ 

Hour += 1; 

} 

[ContextMenu(&quot;Sub Hour&quot;, false, 10)] 

public void SubHour()

{ 

Hour -= 1; 

} 

}
</code></pre>
<h3 id="注册撤销操作"><a href="#注册撤销操作" class="headerlink" title="注册撤销操作"></a>注册撤销操作</h3><p>Undo.RegisterCreatedObjectUndo方法注册撤销操作</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
    <article
  id="post-Unity3D-研究Unity引擎的技巧"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/07/20/Unity3D-%E7%A0%94%E7%A9%B6Unity%E5%BC%95%E6%93%8E%E7%9A%84%E6%8A%80%E5%B7%A7/"
    >研究Unity引擎的技巧</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/07/20/Unity3D-%E7%A0%94%E7%A9%B6Unity%E5%BC%95%E6%93%8E%E7%9A%84%E6%8A%80%E5%B7%A7/" class="article-date">
  <time datetime="2023-07-20T15:00:27.949Z" itemprop="datePublished">2023-07-20</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unity3D/">Unity3D</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="调用Editor内部的函数"><a href="#调用Editor内部的函数" class="headerlink" title="调用Editor内部的函数"></a>调用Editor内部的函数</h1><p>参考:<br><a href="https://www.xuanyusong.com/archives/4263（获取资源内存和硬盘大小" target="_blank" rel="noopener">https://www.xuanyusong.com/archives/4263（获取资源内存和硬盘大小</a>)</p>
<p>Unity Editor实现的一些功能，调用了Editor本身的一些函数。这些函数可能没有作为API提供出来。如果想要调用，可以看Editor的源码：用dnSpy反编译一下，找到相关的代码与函数。<br>然后利用反射，根据函数名调用相应函数。</p>
<p>此外，该方法提供了一个思路：想要深入理解UnityEditor的实现，就多看看Editor的包文件，反编译看看源码。一个是顺藤摸瓜，看相应功能的实现。一个是看包的整体结构组织，了解各个模块的功能以及实现，理解模块之间的关系。<br>d<br>一个小工具（用来调用内部函数）：</p>
<p><code>csharp private static object InvokeInternalAPI(string type, string method, params object[] parameters) { var assembly = typeof(AssetDatabase).Assembly; var custom = assembly.GetType(type); var methodInfo = custom.GetMethod(method, BindingFlags.Public | BindingFlags.Static); return methodInfo != null ? methodInfo.Invoke(null, parameters) : 0; }</code> <code>csharp [MenuItem(&quot;ProfilingTools/GetTextureMem&quot;)] public static void GetTextureMem() { Texture target = Selection.activeObject as Texture; Assembly editorAssembly = Assembly.Load(&quot;UnityEditor&quot;); var type = editorAssembly.GetType(&quot;UnityEditor.TextureUtil&quot;); MethodInfo methodInfo = type.GetMethod(&quot;GetStorageMemorySize&quot;, BindingFlags.Static | BindingFlags.Instance | BindingFlags.Public); Debug.Log(&quot;内存占用：&quot; \+ EditorUtility.FormatBytes(UnityEngine.Profiling.Profiler.GetRuntimeMemorySizeLong(Selection.activeObject))); Debug.Log(&quot;硬盘占用：&quot; \+ EditorUtility.FormatBytes((int)methodInfo.Invoke(null, new object[] { target }))); }</code> </p>
<h1 id="监听Unity编辑器关闭的事件"><a href="#监听Unity编辑器关闭的事件" class="headerlink" title="监听Unity编辑器关闭的事件"></a>监听Unity编辑器关闭的事件</h1><p><code>csharp using UnityEditor; public class Test { [InitializeOnLoadMethod] static void InitializeOnLoadMethod() { EditorApplication.wantsToQuit -= Quit; EditorApplication.wantsToQuit += Quit; } static bool Quit() { EditorUtility.DisplayDialog(&quot;我就是不让你关闭unity&quot;, &quot;我就是不让你关闭unity&quot;, &quot;呵呵&quot;); return false; //return true表示可以关闭unity编辑器 } }</code> </p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/archives/3/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/archives/2/">2</a><a class="page-number" href="/archives/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/archives/5/">5</a><a class="page-number" href="/archives/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/archives/13/">13</a><a class="extend next" rel="next" href="/archives/5/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2023
        <i class="ri-heart-fill heart_icon"></i> Prin
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/img/circle_image.png" alt="半个出家人"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories/Unreal">虚幻引擎</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>